/*!
 *
 * Bryntum Scheduler Pro 5.2.0 (TRIAL VERSION)
 *
 * Copyright(c) 2022 Bryntum AB
 * https://bryntum.com/contact
 * https://bryntum.com/license
 *
 */
(function(a,b){const c=a();function v(a,b){return _cmpb(a-0x1ab,b);}while(!![]){try{const d=-parseInt(v(0x2f7,0x354))/0x1+parseInt(v(0x2f2,0x305))/0x2*(-parseInt(v(0x33e,0x347))/0x3)+parseInt(v(0x35a,0x34c))/0x4*(-parseInt(v(0x2fa,0x2d2))/0x5)+parseInt(v(0x323,0x344))/0x6+parseInt(v(0x382,0x342))/0x7*(parseInt(v(0x2fc,0x32b))/0x8)+parseInt(v(0x2f5,0x315))/0x9+-parseInt(v(0x371,0x3ca))/0xa*(parseInt(v(0x319,0x35b))/0xb);if(d===b)break;else c['push'](c['shift']());}catch(e){c['push'](c['shift']());}}}(_cmpa,0xebc36));import{GridFeatureManager}from'./GridBase.js';import{DragHelper}from'./MessageDialog.js';import{Delayable,InstancePlugin,DomHelper,_defineProperty,ObjectHelper}from'./Editor.js';import{TreeColumn}from'./Tree.js';class RowReorder extends Delayable(InstancePlugin){static get[_cmpw(-0x145,-0x159)](){function x(a,b){return _cmpw(b-0xb6,a);}return x(-0x9f,-0x6f);}static get[_cmpw(-0x168,-0x178)](){return{'showGrip':null,'hoverExpandTimeout':0x3e8,'touchStartDelay':0x12c,'dropOnLeaf':![]};}[_cmpw(-0xcb,-0x100)](a,b){function y(a,b){return _cmpw(b-0xa0,a);}this[y(-0xdc,-0xc3)]=a,super['construct'](...arguments);}[_cmpw(-0x13f,-0x138)](){var a;(a=this[z(0x18b,0x1be)])===null||a===void 0x0?void 0x0:a[z(0x19a,0x1e5)]();function z(a,b){return _cmpw(a-0x2c8,b);}super[z(0x189,0x1c8)]();}[_cmpw(-0xdb,-0xdc)](){const a=this,{grid:b}=a;function A(a,b){return _cmpw(a-0x20a,b);}a[A(0xcd,0x84)]=new DragHelper({'name':A(0x107,0x139),'cloneTarget':!![],'dragThreshold':0xa,'targetSelector':A(0x132,0x170),'lockX':!![],'scrollManager':b[A(0x101,0x103)],'dragWithin':b['element'],'outerElement':a[A(0x92,0xbf)],'touchStartDelay':a[A(0x114,0x13d)],'isElementDraggable':c=>!c[A(0x136,0x10f)](A(0x91,0x9a)),'monitoringConfig':{'scrollables':[{'element':b[A(0x93,0x37)][A(0xac,0xcb)],'direction':A(0xf4,0xe9)}]},'ignoreSamePositionDrop':![],'createProxy'(c){const d=c['cloneNode'](!![]),e=document[B(-0x1b9,-0x1f0)](B(-0x230,-0x259));function B(a,b){return A(a- -0x2f9,b);}e[B(-0x23c,-0x253)]['add']('b-row-reorder-proxy'),d['removeAttribute']('id'),d[B(-0x1e9,-0x213)][B(-0x241,-0x252)]='',e['appendChild'](d);if(b[B(-0x1f3,-0x212)][B(-0x21f,-0x24d)]>0x1){const f=d[B(-0x20b,-0x24d)](!![]);f['classList']['add'](B(-0x25b,-0x20e)),e[B(-0x20c,-0x236)](f);}return DomHelper['removeClsGlobally'](e,'b-selected',B(-0x1d0,-0x19e),'b-focused'),e;},'listeners':{'beforedragstart':'onBeforeDragStart','dragstart':A(0x142,0x170),'drag':A(0x123,0x135),'drop':A(0xae,0x83),'reset':A(0xe7,0xf5),'prio':0x2710,'thisObj':a}}),a[A(0xca,0xf5)](a[A(0xcd,0xd2)],[A(0xb1,0x6e),'dragStart',A(0xa1,0x5b),A(0xad,0xb6)],A(0xea,0x12e)),a['dropIndicator']=DomHelper['createElement']({'className':A(0xc1,0x9e)}),a['dropOverTargetCls']=[A(0xbf,0x63),'b-hover'];}static get[_cmpw(-0x131,-0x119)](){return{'after':['onPaint']};}get[_cmpw(-0x178,-0x148)](){function C(a,b){return _cmpw(a- -0x11e,b);}const a=this['grid'][C(-0x23d,-0x238)][0x0];return this[C(-0x281,-0x271)][C(-0x1e4,-0x1c1)][a][C(-0x27c,-0x276)];}[_cmpw(-0x128,-0x110)]({event:a,source:b,context:c}){const d=this,{grid:e}=d,f=d['targetSubGridElement'];if(d['disabled']||e[D(-0x126,-0x111)]||e[D(-0x145,-0x185)]||!f['contains'](c[D(-0x1cd,-0x17d)]))return![];c[D(-0xdb,-0xec)]=e[D(-0x1b9,-0x166)](c['element']);if(c[D(-0xba,-0xec)][D(-0xb7,-0x111)])return![];c[D(-0x107,-0xfc)]=e[D(-0x139,-0x177)][D(-0xf6,-0x148)](c[D(-0xec,-0xec)])[D(-0x12b,-0x116)];function D(a,b){return _cmpw(b- -0x1f,a);}if(b['startEvent']['pointerType']===D(-0x1a6,-0x19b))!e[D(-0x18b,-0x174)](c[D(-0x91,-0xec)])&&e[D(-0x171,-0x11a)]({'record':c['startRecord'],'addToSelection':![]});else!e['isSelected'](c[D(-0xd8,-0xec)])&&!a[D(-0xd6,-0x131)]&&!a['ctrlKey']&&e['selectRow']({'record':c[D(-0x94,-0xec)]});const g=c[D(-0x183,-0x15b)]=e[D(-0x159,-0x123)][D(-0x15c,-0x16f)](h=>!h[D(-0x13b,-0x111)])[D(-0xce,-0x117)]()[D(-0xd8,-0x104)]((h,i)=>e[D(-0xfd,-0x14e)]['indexOf'](h)-e[D(-0x11f,-0x14e)][D(-0x13c,-0xe2)](i));return g[D(-0x157,-0x14f)]>0x0&&!g[D(-0xce,-0x103)](h=>h['isSpecialRow']);}[_cmpw(-0xc8,-0x90)]({context:a}){var b,c;const d=this,{grid:e}=d,{cellEdit:f,cellMenu:g,headerMenu:h}=e[E(0x36d,0x356)];f&&(d[E(0x318,0x2d9)]=f[E(0x370,0x36f)],f[E(0x334,0x36f)]=!![]);g===null||g===void 0x0?void 0x0:(b=g[E(0x372,0x346)])===null||b===void 0x0?void 0x0:b['call'](g,![]),h===null||h===void 0x0?void 0x0:(c=h['hideContextMenu'])===null||c===void 0x0?void 0x0:c['call'](h,![]),e[E(0x32a,0x2ed)][E(0x317,0x2fe)][E(0x2cc,0x2dc)](E(0x322,0x375));const i=a[E(0x2ea,0x2ed)][E(0x313,0x363)](E(0x383,0x33e));i===null||i===void 0x0?void 0x0:i[E(0x2fc,0x2fe)][E(0x2cd,0x307)](E(0x370,0x315)),a[E(0x2ba,0x2ed)][E(0x32b,0x2ff)][E(0x307,0x2fe)][E(0x2da,0x307)](E(0x372,0x332),E(0x35a,0x36a));function E(a,b){return _cmpw(b-0x44b,a);}e[E(0x334,0x362)]['appendChild'](d[E(0x334,0x2fc)]);}[_cmpw(-0xe7,-0xae)]({context:a,event:b}){function F(a,b){return _cmpw(b-0x530,a);}const c=this,{grid:d}=c,{store:e,rowManager:f}=d,{clientY:g}=b;let h=!![],i=f['getRowAt'](g),j,k,l,m,n;if(i){const p=i[F(0x45e,0x439)]+d[F(0x426,0x45b)]['y']-d[F(0x39d,0x3b9)]['y'],q=i['height']/0x4,r=p+q,s=p+i[F(0x481,0x442)]/0x2,t=p+q*0x3;k=i['dataIndex'],j=e[F(0x426,0x3f5)](k),m=e[F(0x3e7,0x3bf)]&&(j[F(0x470,0x450)]||c[F(0x3ec,0x41c)])&&g>r&&g<t,l=!m&&b[F(0x3f4,0x44e)]>=s;}else b[F(0x489,0x44e)]<d[F(0x4ab,0x45b)]['y']?(k=0x0,j=e[F(0x39c,0x3c5)],l=![]):(k=e['count']-0x1,j=e['last'],l=!![]),i=d[F(0x3dd,0x3d8)][F(0x490,0x461)](k);if(j===c[F(0x452,0x426)]&&c[F(0x411,0x433)]===l&&c[F(0x41f,0x3fb)]===m){a[F(0x431,0x44d)]=c[F(0x3fa,0x420)];return;}if(c['overRecord']!==j){var o;(o=f[F(0x3f5,0x43f)](c[F(0x3f9,0x426)]))===null||o===void 0x0?void 0x0:o[F(0x410,0x3c3)](c[F(0x3bc,0x416)]);}c[F(0x41c,0x426)]=j,c[F(0x431,0x433)]=l,c['over']=m,j===a[F(0x484,0x463)]&&(h=![]),!l&&k===0x0&&e[F(0x3c7,0x3c0)]&&(h=![]),e[F(0x40e,0x3bf)]?(n=l?j[F(0x3ba,0x415)]:j,a['records'][F(0x46e,0x44c)](u=>u[F(0x466,0x422)](j))&&(h=![]),a[F(0x410,0x3fd)]=h&&m?j:j[F(0x3a0,0x3fd)],i['toggleCls'](c[F(0x412,0x416)],h&&m),c[F(0x43c,0x431)](c['hoverTimer']),j&&j[F(0x479,0x450)]&&!j[F(0x3fa,0x3bc)](e)&&(c['hoverTimer']=c[F(0x3d9,0x428)](()=>d[F(0x3bf,0x40a)](j),c[F(0x3d9,0x3ea)]))):n=l?e['getAt'](k+0x1):j,!m&&k===e[F(0x493,0x46d)](a[F(0x4c0,0x463)])+(l?-0x1:0x1)&&a[F(0x3a7,0x3fd)]&&a[F(0x428,0x463)][F(0x433,0x3fd)]===a['parent']&&(h=![]),i&&DomHelper['setTranslateY'](c[F(0x3b1,0x3e1)],Math[F(0x408,0x40e)](i[F(0x412,0x439)]+(l?i[F(0x3aa,0x3d2)]['getBoundingClientRect']()[F(0x418,0x442)]:0x0),0x1)),c['dropIndicator'][F(0x3df,0x436)][F(0x3ef,0x3d9)]=m?F(0x487,0x430):F(0x47a,0x452),c['dropIndicator'][F(0x424,0x3e3)][F(0x455,0x464)]('b-drag-invalid',!h),a[F(0x40a,0x409)]=n,a[F(0x40e,0x44d)]=c[F(0x44b,0x420)]=h;}async[_cmpw(-0x15c,-0x181)](a){const b=this,c=a[G(-0x112,-0xd7)];function G(a,b){return _cmpw(b-0x3c,a);}c['valid']=c[G(-0xd0,-0xa7)]&&b[G(-0xc2,-0xd4)];if(c[G(-0x8a,-0xa7)]){c[G(-0x122,-0xd0)]=!![];b[G(-0x6e,-0x9b)][G(-0x11b,-0xf3)][G(-0x14b,-0x135)]&&(c[G(-0x94,-0xef)]=c[G(-0x133,-0x100)][G(-0x135,-0x13a)](e=>{function H(a,b){return G(a,b-0x5b2);}var f;return{'record':e,'parentId':(f=e[H(0x512,0x4bb)])===null||f===void 0x0?void 0x0:f['id'],'parentIndex':e[H(0x510,0x4bc)]};}));const d=await b['trigger'](G(-0xde,-0xdb),a);d===![]&&(c[G(-0xc1,-0xa7)]=![]),await b[G(-0x119,-0x101)][G(-0xaa,-0x106)](b[G(-0xf6,-0x113)],{'align':G(-0xb6,-0x8d)}),await b[G(-0x55,-0x88)](c);}b[G(-0x11f,-0xc3)](b[G(-0x7f,-0x94)]),b[G(-0x115,-0xce)]=b[G(-0xcf,-0xc1)]=b['over']=null,b[G(-0x127,-0xfe)](G(-0x99,-0xd5),a);}async[_cmpw(-0xc4,-0x86)](a){const b=this,{grid:c}=b,{store:d,focusedCell:e}=c;let f=a[I(-0x15a,-0x10b)];a[I(-0x62,-0xb2)]=a['valid']&&!f[I(-0xbb,-0xb3)](i=>!d[I(-0xcf,-0xbe)](i));if(a[I(-0xe3,-0xb2)]){let i;if(d['tree']){var g,h;f=f['filter'](j=>!j['parent']||!f[I(-0x7c,-0xbe)](j[I(-0x153,-0x102)])),i=await a[I(-0xc5,-0x102)]['tryInsertChild'](f,b[I(-0xe3,-0x104)]?(g=a['parent']['children'])===null||g===void 0x0?void 0x0:g[0x0]:a[I(-0xc4,-0xf6)]),c[I(-0xf5,-0x127)]['forEach'](j=>j[I(-0x164,-0x13c)](b[I(-0xcd,-0xe9)])),!a[I(-0x15d,-0x102)][I(-0x104,-0x143)]()&&(h=a[I(-0x159,-0x102)]['children'])!==null&&h!==void 0x0&&h[I(-0x13b,-0xff)]&&c[I(-0x10b,-0xf5)](a['parent']),a[I(-0x6d,-0xb2)]=i!==![];}else d[I(-0xea,-0xe7)](f,a[I(-0x134,-0xf6)]);(e===null||e===void 0x0?void 0x0:e[I(-0xb1,-0xda)])>=0x0&&(c[I(-0x110,-0x11d)]=null,c[I(-0xff,-0xa2)]({'grid':c,'record':e[I(-0xed,-0xbc)],'columnId':e[I(-0x139,-0xf3)]})),d[I(-0xea,-0xd6)]();}a['finalize'](a[I(-0xd9,-0xb2)]);function I(a,b){return _cmpw(b-0x31,a);}c['element'][I(-0xcc,-0x11c)][I(-0x127,-0x113)](I(-0xef,-0xa5));}['onReset'](){const a=this,b=a[J(0x26,0x4d)][J(0x94,0x86)][J(0x90,0x6d)];a[J(0x26,0x21)][J(0x2b,0x24)][J(0x3c,0x2d)][J(0x45,0xa0)]('b-row-reordering');function J(a,b){return _cmpw(a-0x189,b);}b&&(b[J(0xad,0xc5)]=a['cellEditDisabledState']),a['dropIndicator'][J(0x45,0xa1)](),DomHelper[J(0x5f,0x44)](a['grid'][J(0x2b,-0x1c)],...a[J(0x6f,0x8b)]);}[_cmpw(-0xec,-0x8f)]({firstPaint:a}){function K(a,b){return _cmpw(b-0x342,a);}a&&this[K(0x2ad,0x267)]();}[_cmpw(-0x17b,-0x13b)](a){function L(a,b){return _cmpw(a-0x620,b);}this[L(0x4bd,0x4d1)][L(0x4c2,0x501)][L(0x4d3,0x4e0)][L(0x554,0x5a3)](L(0x53a,0x55b),a);}}RowReorder['featureClass']='';function _cmpw(a,b){return _cmpb(a- -0x2b1,b);}RowReorder['_$name']=_cmpw(-0x125,-0xe1),GridFeatureManager[_cmpw(-0x138,-0x166)](RowReorder,![]),GridFeatureManager[_cmpw(-0x138,-0x178)](RowReorder,!![],_cmpw(-0x175,-0x119));class TreeGroup extends InstancePlugin{[_cmpw(-0xcb,-0x9b)](a,b){function M(a,b){return _cmpw(a-0x11b,b);}super['construct'](a,b);if(!a['hasFeature'](M(-0x56,-0x43)))throw new Error(M(0x15,0x5b));}[_cmpw(-0xfe,-0x103)](a){function N(a,b){return _cmpw(b-0x417,a);}this['parentCls']&&(a[N(0x30e,0x2ea)]=this['parentCls']);}['processTransformedData'](a){}async[_cmpw(-0x137,-0x15d)](){if(this[O(0x2b7,0x2c4)]['isLoading']){await this[O(0x2b7,0x2ba)][O(0x2a2,0x2a1)](O(0x21c,0x258),![]);if(this[O(0x24e,0x259)])return;}function O(a,b){return _cmpw(a-0x396,b);}const {crudManager:a}=this[O(0x2bf,0x2f3)];if(a){if(a[O(0x2d1,0x309)]){await a[O(0x2a2,0x28e)]('requestDone');if(this[O(0x24e,0x22d)])return;}await this[O(0x2bf,0x2a0)][O(0x287,0x2db)][O(0x242,0x285)]();}}async[_cmpw(-0x173,-0x16b)](a){const b=this,{client:c}=b,d=c['columns'][P(0x206,0x228)](g=>g instanceof TreeColumn);let {store:e}=c,f=null;b[P(0x2b9,0x281)]=a,b['isApplying']++,c[P(0x271,0x231)]();a&&!b[P(0x2c2,0x2a3)]&&(b[P(0x2e0,0x2a3)]=e,e=new e[(P(0x232,0x26d))]({'tree':!![],'modelClass':e[P(0x2ef,0x2a9)]}),c['store']=e);function P(a,b){return _cmpw(b-0x382,a);}await b[P(0x28c,0x24b)]();if(b[P(0x256,0x23a)])return;return a?(e[P(0x298,0x298)]=b[P(0x2f9,0x2a3)][P(0x264,0x2bb)][P(0x247,0x223)](g=>g['isLeaf']?[g[P(0x229,0x214)]()]:[]),f=e[P(0x211,0x21e)](a,g=>{function Q(a,b){return P(b,a-0x3);}ObjectHelper[Q(0x264,0x227)](g,e[Q(0x2ac,0x2da)][Q(0x23b,0x22b)](d['field']),g['key']),b[Q(0x287,0x2c7)](g);}),b[P(0x2ef,0x2b4)](f),e[P(0x244,0x298)]=f[P(0x1ed,0x22c)]):(c[P(0x28d,0x253)]=b[P(0x25e,0x2a3)],b[P(0x2ea,0x2a3)]=null),b[P(0x29c,0x292)]--,c[P(0x27d,0x2b1)](),c['rowManager'][P(0x1f4,0x22f)](),f;}[_cmpw(-0xf3,-0xe6)](a){function R(a,b){return _cmpw(a-0x46d,b);}(a||!this[R(0x32f,0x385)])&&this[R(0x2fa,0x31f)](a);}async[_cmpw(-0xd2,-0xb5)](a){ObjectHelper['assertArray'](a,'group()');function S(a,b){return _cmpw(b-0x610,a);}await this[S(0x4aa,0x49d)](a);}async[_cmpw(-0x134,-0x172)](){function T(a,b){return _cmpw(b-0x1e6,a);}this[T(0xce,0x76)]&&await this['applyLevels'](null);}get[_cmpw(-0x170,-0x1bb)](){return Boolean(this['_levels']);}}_defineProperty(TreeGroup,'$name','TreeGroup'),_defineProperty(TreeGroup,_cmpw(-0x168,-0x14d),{'levels':null,'parentCls':_cmpw(-0xfc,-0xb0)}),_defineProperty(TreeGroup,'pluginConfig',{'assign':[_cmpw(-0xd2,-0x9f),_cmpw(-0x134,-0x18a)]}),_defineProperty(TreeGroup,_cmpw(-0x15b,-0x1ad),{'isApplying':0x0,'originalStore':null}),TreeGroup[_cmpw(-0x12c,-0x11c)]=_cmpw(-0x161,-0x17b),GridFeatureManager[_cmpw(-0x138,-0xe9)](TreeGroup);function _cmpb(a,b){const c=_cmpa();return _cmpb=function(d,e){d=d-0x135;let f=c[d];return f;},_cmpb(a,b);}function _cmpa(){const U=['originalRowTop','disabled','init','125139AtFOBp','modelClass','.b-grid-row','client','b-row-reordering','_bodyRectangle','closest','focusCell','group','resumeRefresh','hoverTimer','getRow','processTransformedData','startRecord','toggle','construct','createElement','l0-l0','onDragStart','allRecords','subGrids','isLoadingOrSyncing','finalizeReorder','indexOf','touch','updateShowGrip','load','.b-grid-cell\x20.b-widget','targetSubGridElement','scrollable','map','Gantt','isExpanded','applyLevels','cellEditDisabledState','tree','isGrouped','add','link','removeCls','b-row-dragging-multiple','first','1707898jPTNPD','drag','configurable','2426562PBikZt','isTreeGrouped','1096178AqXyep','treeify','grid','285AAKfbc','TreeGroup','808vMsIXf','flatMap','element','abort','onDrop','properties','find','beforeDragStart','rowManager','visibility','children','isSelected','commitAsync','reinitialize','transform','suspendRefresh','filter','dropIndicator','_focusedCell','classList','firstElementChild','b-row-reordering-target','getFieldDataSource','b-row-drop-indicator','isDestroyed','getRecordFromElement','hoverExpandTimeout','$name','remove','5659709aHSRTJ','animateProxyTo','div','relayEvents','doDestroy','isConfiguring','dragHelper','records','getAt','trigger','10812786zjbssE','registerFeature','waitForReadiness','b-focused','over','clearGroups','parent','parentIndex','pluginConfig','length','store','destroy','cls','_$name','oldPositionContext','removeClsGlobally','getRowFor','onBeforeDragStart','insertBefore','expand','RowReorder','columnId','onReset','max','setPath','gridRow','regions','3upvLcW','appendChild','cloneNode','nextSibling','dropOverTargetCls','b-selected','move','gridRowBeforeDropFinalize','vertical','constructor','dropOnLeaf','context','shiftKey','gridRowDrop','reorderValid','project','contains','.b-focused','async','_rowIndex','overRecord','scrollManager','setTimeout','clearSorters','The\x20TreeGroup\x20feature\x20requires\x20the\x20Tree\x20feature\x20to\x20be\x20enabled','hideContextMenu','selectedRecords','rowReorder','31368xEBZpd','_levels','hidden','clearTimeout','processParentData','after','b-generated-parent','selectRow','style','cellEdit','slice','top','touchStartDelay','features','await','updateLevels','readOnly','getRowById','isApplying','includes','height','record','onPaint','10guqGwG','data','bodyContainer','querySelector','onDrag','b-row-reorder-with-grip','sort','some','valid','clientY','b-hover','isParent','originalStore','visible'];_cmpa=function(){return U;};return _cmpa();}export{RowReorder,TreeGroup};